# n8n

---

本指南将介绍如何在 NVIDIA **Jetson Orin** 设备上安装、配置和使用 **n8n**。n8n 是一个强大的可扩展工作流自动化工具，支持数百种内置集成。由于支持 Docker 且系统资源需求低，在 Jetson 硬件上运行非常流畅。

---

## 1. 概览

- 可视化低代码工作流构建器  
- 支持 300+ 集成（API、Webhook、数据库等）  
- 兼容 Docker，部署快速  
- 本地优先自动化（注重隐私）  
- 完全支持 ARM64 架构（Jetson）

本指南内容包括：

- 基于 Docker 的安装  
- 持久化配置  
- 服务管理  
- 远程访问配置  
- 卸载与故障排查

![overview](/img/NG45XX_n8n_overview.png)

---

## 2. 系统要求

### 硬件要求

| 组件   | 最低要求                        |
| ---- | --------------------------- |
| 设备   | Jetson Orin Nano / NX / AGX |
| 内存   | ≥ 4GB（推荐 8GB）               |
| 存储空间 | ≥ 2GB 可用空间                  |

### 软件要求

- Ubuntu 20.04 或 22.04（基于 JetPack）
- Docker & Docker Compose  
- Node.js（可选，用于源码运行）

---

## 3. 安装 n8n

### 方法 A：Docker CLI 快速启动

```bash
docker run -it --rm \
  --name n8n \
  -p 5678:5678 \
  -v ~/.n8n:/home/node/.n8n \
  n8nio/n8n
```

> ✅ 官方镜像支持 ARM64，Jetson 可直接运行。

### 方法 B：推荐使用 Docker Compose

1. 创建 n8n 安装目录：

```bash
mkdir -p ~/n8n && cd ~/n8n
```

2. 创建 `docker-compose.yml` 文件：

```yaml
version: "3"

services:
  n8n:
    image: n8nio/n8n
    ports:
      - "5678:5678"
    volumes:
      - ./n8n_data:/home/node/.n8n
    restart: always
```

3. 启动 n8n：

```bash
docker compose up -d
```

【图片】*图示：Docker Compose 启动 n8n 容器*

---

## 4. 访问界面

n8n 运行后，通过浏览器访问：

```
http://<Jetson-IP>:5678
```

### 可选：启用基本身份验证（登录保护）

可通过环境变量设置登录用户名密码：

```bash
-e N8N_BASIC_AUTH_USER=admin \
-e N8N_BASIC_AUTH_PASSWORD=securepass
```

在 Compose 中，将其添加到 `environment:` 段或使用 `.env` 文件。

【图片】*图示：n8n 启用 Basic Auth 的登录界面*

---

## 5. 常用命令

| 操作     | 命令                       |
| ------ | ------------------------ |
| 启动 n8n | `docker compose up -d`   |
| 查看日志   | `docker logs n8n`        |
| 停止服务   | `docker compose down`    |
| 重启服务   | `docker compose restart` |
| 更新 n8n | `docker pull n8nio/n8n`  |

---

## 6. 可选：启用远程访问

若需远程访问 n8n（如从其他设备）：

1. 确保 Jetson 防火墙允许 TCP 端口 `5678`。  
2. 在 Compose 文件或容器中设置如下变量：

```env
N8N_HOST=0.0.0.0
N8N_PORT=5678
WEBHOOK_TUNNEL_URL=https://yourdomain.com
```

3. 若需 HTTPS，建议配置反向代理（如 Nginx + Let's Encrypt）

【图片】*图示：通过域名 + HTTPS 部署的 n8n 页面*

---

## 7. 更新 n8n

更新到最新版：

```bash
docker pull n8nio/n8n
docker compose down
docker compose up -d
```

> 💡 数据会保存在 `./n8n_data` 中，不会丢失。

---

## 8. 卸载 n8n

### 停止并删除容器：

```bash
docker compose down
```

### 删除本地数据：

```bash
rm -rf ~/n8n
```

### 移除 Docker 镜像（可选）：

```bash
docker rmi n8nio/n8n
```

---

## 9. 故障排查

| 问题          | 解决方案                        |
| ----------- | --------------------------- |
| 无法访问 WebUI  | 检查 Jetson 是否开放 5678 端口      |
| 工作流未保存      | 确保 `~/.n8n` 或挂载卷可写          |
| 容器崩溃        | 使用 `docker logs n8n` 查看详细日志 |
| 需要 HTTPS 访问 | 配置 Nginx 反向代理 + SSL         |

---

## 10. 附录

### 默认文件路径

| 用途          | 路径                        |
| ----------- | ------------------------- |
| n8n 配置和数据   | `~/.n8n` 或 `./n8n_data/`  |
| Docker 项目目录 | `~/n8n`                   |
| WebUI 访问地址  | `http://<Jetson-IP>:5678` |

### 参考资源

- [n8n 官方文档](https://docs.n8n.io)  
- [Docker Hub - n8n](https://hub.docker.com/r/n8nio/n8n)  
- [GitHub - n8n](https://github.com/n8n-io/n8n)  
- [Jetson 开发者论坛](https://forums.developer.nvidia.com)
