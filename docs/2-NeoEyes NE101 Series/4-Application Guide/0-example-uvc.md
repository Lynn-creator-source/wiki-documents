# UVC

## 技术概述

**UVC（USB Video Class）协议**是USB Implementers Forum制定的视频设备通用标准协议，支持视频设备通过USB接口与主机设备进行即插即用通信。本方案基于ESP32-S3平台实现UVC摄像头的图像采集与传输功能。

### 方案优势
- 支持更高分辨率图像采集
- 支持灵活更换不同规格摄像头模组
- 采用标准化USB接口，扩展便捷
- 简化硬件布线复杂度

## 准备工作

### 硬件配置要求
- 标准开发主板（ESP32-S3核心板）
- 兼容UVC协议的摄像头模组
- 完整硬件连接指南参考：[硬件连接说明](.././Hardware%20Guide/Hardware%20Connection)

### 软件资源获取
1. **预编译固件**：
   - 获取最新UVC示例固件
   - 烧录方法参考：[开发环境配置指南](./../Software%20Guide/Development%20Environment%20Setup)

2. **源码开发**：
   - 支持本地编译（详见下方开发指南章节）

## 功能验证流程

1. **固件升级**
   - 使用烧录工具写入UVC示例固件

2. **设备初始化**
   - 正确连接硬件设备
   - 上电启动，等待系统初始化完成（约1分钟）

3. **功能测试**
   - 短按功能键进入配置模式
   - 访问Web管理界面（http://192.168.1.1）
   - 验证实时视频流是否正常显示
   
   ![视频预览界面](/img/NE101_example_2.png)

4. **抓拍测试**
   - 设置抓拍参数并执行测试
   - 完整操作指南参考：[快速入门手册](./../Quick%20Start)

## 开发实现指南

### 开发环境要求
- Visual Studio Code最新版
- ESP-IDF插件（v5.1.1版本）
- UVC示例代码库

### 开发步骤详解

1. **获取源码**
   ```bash
   mkdir uvc && cd uvc
   git clone git@github.milesight.com:ne101.git
   ```

2. **工程配置**
   - 使用VS Code打开工程目录
   - 启用UVC功能：修改`main/camera.c`文件，设置`CAMERA_USE_UVC=1`

3. **分辨率配置**
   - 修改`main/uvc.c`中的分辨率参数
   - 注意同步调整缓冲区大小配置
   
   ![分辨率配置界面](/img/NE101_example_1.png)

4. **编译烧录**
   - 执行完整编译流程
   - 烧录生成固件到设备

## 重要注意事项

1. **协议兼容性**
   - ESP32-S3仅支持USB 1.1协议
   - 定制UVC设备需确保兼容USB 1.1标准

2. **性能优化建议**
   - 高分辨率下需合理设置帧缓冲区

